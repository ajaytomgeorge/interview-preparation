ğŸ“Œ Question: Find Median from Data Stream
ğŸ”¹ Problem

Design a data structure that supports:

addNum(num) â†’ add a number

findMedian() â†’ return the median of all numbers so far

Median:

Odd count â†’ middle element

Even count â†’ average of two middle elements

ğŸ’¡ Key Idea

Use two heaps to split the data into two halves.

Heaps Used

Max-heap (left) â†’ smaller half

Min-heap (right) â†’ larger half

Invariants

max(left) â‰¤ min(right)

|size(left) âˆ’ size(right)| â‰¤ 1

ğŸ§  Median Logic

If one heap is larger â†’ median is its top

If both heaps same size â†’ average of both tops

â± Complexity

Insert: O(log N)

Find median: O(1)

Space: O(N)

ğŸ§© Python Code (Exam Version)
import heapq

class MedianFinder:
    def __init__(self):
        self.left = []   # max heap (negative values)
        self.right = []  # min heap

    def addNum(self, num):
        heapq.heappush(self.left, -num)

        if self.right and -self.left[0] > self.right[0]:
            heapq.heappush(self.right, -heapq.heappop(self.left))

        if len(self.left) > len(self.right) + 1:
            heapq.heappush(self.right, -heapq.heappop(self.left))
        elif len(self.right) > len(self.left):
            heapq.heappush(self.left, -heapq.heappop(self.right))

    def findMedian(self):
        if len(self.left) > len(self.right):
            return -self.left[0]
        return (-self.left[0] + self.right[0]) / 2

ğŸ¯ One-Line Exam Explanation

â€œWe maintain a max-heap for the lower half and a min-heap for the upper half, balance their sizes, and compute the median from their top elements.â€

If you want, I can: