# Gas Station (Circular Tour)

## Problem

Given gas and cost at stations, find starting point to complete a circle.

**Greedy insight:** If total gas < total cost → impossible. Reset start when balance becomes negative.

**Key idea:** Local failure means no earlier station could work.

---

## Problem Story Version

Imagine:
- You have a circular track with n gas stations
- Each station i has:
  - `gas[i]` → amount of gas you can fill at that station
  - `cost[i]` → amount of gas needed to drive to the next station `(i+1) % n`
- You have a car with unlimited tank, but it starts empty

**Question:** From which station can you start so that you can drive all the way around the circle and return to the starting station?

If it's impossible, return `-1`.

---

## Key Observations

### Observation 1: Feasibility

Total gas must be at least total cost, otherwise you cannot complete the circle:

$$\text{if } \sum gas[i] < \sum cost[i] \Rightarrow \text{impossible}$$

### Observation 2: Local Failure Means Reset

Keep track of `tank = gas gained - cost spent` so far.

If tank ever becomes negative at station i:
- You cannot start from any station before i+1
- The tank would always run out before i+1
- So reset `start = i+1` and `tank = 0`

---

## Intuition With Example

```
gas  = [1, 2, 3, 4, 5]
cost = [3, 4, 5, 1, 2]
```

| Station | gas[i]-cost[i] | tank | action |
|---------|----------------|------|--------|
| 0 | 1-3 = -2 | -2 | tank < 0 → reset start=1, tank=0 |
| 1 | 2-4 = -2 | -2 | tank < 0 → reset start=2, tank=0 |
| 2 | 3-5 = -2 | -2 | tank < 0 → reset start=3, tank=0 |
| 3 | 4-1 = 3 | 3 | continue |
| 4 | 5-2 = 3 | 6 | continue |

✅ Start at station 3, tank stays positive, complete circle.

---

## Visual Intuition

```
Circle: 0 → 1 → 2 → 3 → 4 → 0

Tank after each station if starting at station 0:
0: tank=-2 (fail)
1: tank=-2 (fail)
2: tank=-2 (fail)
3: tank=3 → works
4: tank=6 → works
```

The local deficit at 0,1,2 guarantees none of them can be starting points. Only station 3 succeeds.

---

## Why Greedy Works

1. If total gas ≥ total cost, a solution always exists
2. Resetting start at the first station where tank < 0 is safe, because:
   - Any station before the failure would run out of gas before reaching station i+1
   - No need to consider them
3. The algorithm is O(n) — we just scan the stations once

---

## Key Takeaways for Exams

- ✅ Check feasibility: `sum(gas) < sum(cost)` → impossible
- ✅ Scan stations once: maintain `tank`
- ✅ Reset `start` when `tank < 0`
- ✅ Return `start` at the end (if feasible)

---

## What (i+1) % n Means

We're dealing with a circular track of n gas stations, numbered: `0, 1, 2, ..., n-1`

After the last station `n-1`, the next station is station `0`.

That's why we use modulo (%) arithmetic:

$$\text{next station} = (i+1) \mod n$$

---

## Python Solution

```python
def can_complete_circuit(gas, cost):
    """
    Find the starting station for a complete circular tour.
    Returns starting index or -1 if impossible.
    """
    n = len(gas)
    total_gas = sum(gas)
    total_cost = sum(cost)
    
    # Check feasibility
    if total_gas < total_cost:
        return -1
    
    tank = 0
    start = 0
    
    for i in range(n):
        tank += gas[i] - cost[i]
        
        if tank < 0:
            # Cannot start from any station before i+1
            start = i + 1
            tank = 0
    
    return start

# Example
gas = [1, 2, 3, 4, 5]
cost = [3, 4, 5, 1, 2]
print(can_complete_circuit(gas, cost))  # Output: 3
```

---

## Complexity

| Metric | Value |
|--------|-------|
| **Time** | O(n) |
| **Space** | O(1) |
